## åŸºç¡€ä½¿ç”¨

æ­£åˆ™éƒ½å­¦äº†ç™¾åæ¥éäº†è®°ä¸ä½ï¼Œè¿™æ¬¡ä¸€å®šæŠŠå®ƒæ‹¿ä¸‹ã€‚ã€‚ã€‚

### åˆ›å»º

ä¸¤ç§åˆ›å»ºæ–¹å¼ï¼š

1 ä½¿ç”¨å­—é¢é‡åˆ›å»º /pattern/flags ï¼ˆæ¨èï¼‰

2 ä½¿ç”¨RegExpå¯¹è±¡åˆ›å»º new RegExp('pattern', 'flags')ï¼Œè™½ç„¶è¿™ç§æ–¹å¼æ¯”è¾ƒéº»çƒ¦ï¼Œä½†æ˜¯åœ¨åŠ¨æ€æ­£åˆ™çš„æƒ…å†µä¸‹æ˜¯ä¸å¯æ›¿ä»£çš„

```js
const protocal = '^(https?://)?'
const domain = 'orangesolo\\.cn' // æ›´å¤šæ—¶å€™æ˜¯å˜é‡
const path = '/index.html?$'
const pattern = new RegExp(protocal + domain + path)
pattern.test('http://orangesolo.cn/index.html') // true
pattern.test('orangesolo.cn/index.htm') // true
```

### é‡è¯

- n*: ç­‰ä»·{0,} åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªn
- n+: ç­‰ä»·{1,} åŒ¹é…è‡³å°‘ä¸€ä¸ª n çš„å­—ç¬¦ä¸²
- n?: ç­‰ä»·{0,1} åŒ¹é…é›¶ä¸ªæˆ–ä¸€ä¸ªn
- {n}: åŒ¹é…næ¬¡
- {n,m}: åŒ¹é…nåˆ°mæ¬¡
- {n,}: è‡³å°‘åŒ¹é…næ¬¡

### é¢„å®šä¹‰ç±»

- \s: ç­‰ä»· [\t\n\x0B\f\r]ï¼ŒåŒ¹é…ç©ºæ ¼
- \S: ç­‰ä»·[^\t\n\x0B\f\r] ï¼ŒåŒ¹é…éç©ºæ ¼
- \d: ç­‰ä»·[0-9] ï¼ŒåŒ¹é…æ•°å­—
- \D: ç­‰ä»·[^0-9] ï¼ŒåŒ¹é…éæ•°å­—
- \w: ç­‰ä»·[a-zA-Z_0-9] ï¼ŒåŒ¹é…å•è¯å­—ç¬¦ ( å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿)
- \W: ç­‰ä»·[^a-zA-Z_0-9] ï¼ŒåŒ¹é…éå•è¯å­—ç¬¦
- . : ç­‰ä»·[^\r\n] ï¼ŒåŒ¹é…ä»»æ„å­—ç¬¦ï¼Œé™¤äº†å›è½¦ä¸æ¢è¡Œå¤–æ‰€æœ‰å­—ç¬¦
- \f: ç­‰ä»·\x0c \cLï¼Œ åŒ¹é…ä¸€ä¸ªæ¢é¡µç¬¦
- \n: ç­‰ä»·\x0a \cJï¼Œ åŒ¹é…ä¸€ä¸ªæ¢è¡Œç¬¦
- \r: ç­‰ä»·\x0d \cMï¼Œ åŒ¹é…ä¸€ä¸ªå›è½¦ç¬¦
- \t: ç­‰ä»·\x09 \cIï¼Œ åŒ¹é…ä¸€ä¸ªåˆ¶è¡¨ç¬¦
- \v: ç­‰ä»·\x0b \cKï¼Œ åŒ¹é…ä¸€ä¸ªå‚ç›´åˆ¶è¡¨ç¬¦
- \xxx: æŸ¥æ‰¾ä»¥å…«è¿›åˆ¶æ•° xxx è§„å®šçš„å­—ç¬¦
- \xdd: æŸ¥æ‰¾ä»¥åå…­è¿›åˆ¶æ•° dd è§„å®šçš„å­—ç¬¦
- \uxxxx: æŸ¥æ‰¾ä»¥åå…­è¿›åˆ¶æ•° xxxx è§„å®šçš„ Unicode å­—ç¬¦

### é›†åˆ

ä½¿ç”¨ [] è¡¨ç¤ºé›†åˆï¼Œä»¥å•ä¸ªå­—ç¬¦ä¸ºå•ä½ï¼Œåˆ†ä¸ºå››ç§ï¼š

- [abc] éé¡ºåºæ€§ï¼ŒæŸ¥æ‰¾æ–¹æ‹¬å·å†…**æŒ‡å®š**çš„ä»»ä½•ä¸€ä¸ªå­—ç¬¦
- [0-9] é¡ºåºæ€§ï¼ŒæŸ¥æ‰¾ä»»ä½•ä» 0-9 çš„ä»»æ„ä¸€ä¸ªæ•°å­—, [a-z0-9]æŸ¥æ‰¾ä»»ä½•ä» a-z çš„ä»»æ„ä¸€ä¸ªå­—æ¯æˆ–0-9 çš„ä»»æ„ä¸€ä¸ªæ•°å­—
- [abc0-9] ç»„åˆå¼ï¼ŒæŸ¥æ‰¾ 0-9çš„æ•°å­—æˆ–å…¶ä»–æŒ‡å®šçš„ä»»ä½•ä¸€ä¸ªå­—ç¬¦
- [^a-z] å–åï¼ŒåŒ¹é…ä¸æ˜¯æ‹¬å·å†…çš„çš„ä»»ä½•ä¸€ä¸ªå­—ç¬¦

```js
/^[abcdef]+$/.test('aaabbb') // true
/^[a-z0-9]+$/.test('f3dsfd4sa2fas') // true
/^[a-z1234]+$/.test('aaa444') // true
/^[^a-z]+$/.test('132435234') // true
```

[] å†… . * + ^$ ç­‰æ­£åˆ™ç›¸å…³çš„ç‰¹æ®Šç¬¦å·æ˜¯æ²¡æœ‰æ„ä¹‰çš„

```js
const pattern = /^[.a-z]+$/
pattern.test('aas.') // true
pattern.test('aas123') // false ç‚¹ä¸èƒ½ä»£è¡¨ä»»æ„å­—ç¬¦
```

### åˆ†ç»„

åˆ†ç»„ä½¿ç”¨ ()ï¼Œç›®çš„æ˜¯æ–¹ä¾¿æå–ç›¸åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œå¯ç”¨ RegExp.$1 - $9 è·å–ï¼Œæˆ–è€…ä½¿ç”¨execæ–¹æ³•ç­‰

```js
pattern = /^https?:\/\/([\w\.]+)\/index.html?$/
pattern.test('http://orangesolo.cn/index.html') // true
RegExp.$1 // orangesolo.cn
```

#### æˆ–

åˆ†ç»„å†…ä½¿ç”¨ | å¯è¾¾åˆ°æˆ–çš„æ•ˆæœ

```js
// ä»¥155,188,130,132 å¼€å§‹çš„ç”µè¯å·ç : 
/^(155|188|130|132)\d{8}$/.test('15543449938') // true
```

#### å¼•ç”¨

\n åœ¨è¡¨è¾¾å¼ä¸­è¡¨ç¤ºå¼•ç”¨ï¼Œ \1æ˜¯æŒ‡ä»å·¦å¾€å³æ•°ç¬¬1ä¸ª ()ä¸­çš„å†…å®¹ï¼›ä»¥æ­¤ç±»æ¨ï¼Œ \2è¡¨ç¤ºç¬¬2ä¸ª ()ï¼Œ \0è¡¨ç¤ºæ•´ä¸ªè¡¨è¾¾å¼ã€‚ç”¨æ¥å¼•ç”¨é‡å¤åŒ¹é…çš„å†…å®¹

```js
// åŒ¹é…htmlæ ‡ç­¾
const pattern = /<([a-z]+)>111<\/(\1)>/
pattern.test('<span>111</span>') // true
pattern.test('<span>111</uuu>') // false
```

#### åˆ†ç»„å‘½å

åˆ†ç»„å†…å®¹å¯ä»¥é€šè¿‡ RegExp.$1 - $9 å’Œ exec æ–¹æ³•é€šè¿‡ç´¢å¼•è·å–ï¼Œä¹Ÿå¯ä»¥ç»™åˆ†ç»„è¿›è¡Œå‘½åï¼Œä»¥å‘½åæå–

```js
const pattern = /(?<year>\d{4})-(?<month>\d{2})-(?<day>\d{2})/
const result = pattern.exec('2022-5-18')
console.log(result.group.year) // 2022
console.log(result.group.month) // 5
console.log(result.group.day) // 18
```

åˆ†ç»„å‘½åå±äº es9 çš„æ–°è¯­æ³•ï¼Œæµè§ˆå™¨è¿˜ä¸æ”¯æŒï¼Œéœ€è¦é…ç½®babelç¼–è¯‘ä¸ºes5

#### å¿½ç•¥åˆ†ç»„

å¦‚æœä¸å¸Œæœ›æ•è·æŸäº›åˆ†ç»„ï¼Œåœ¨åˆ†ç»„å†…åŠ ä¸Š ?: å³å¯

```js
/^(?:155|188|130|132)(\d{8})$/.test('15543449938') // true
RegExp.$1 // 43449938 Â·
```

### ä½ç½®åŒ¹é…

- ^xx: ä»¥xxå¼€å§‹ï¼Œå¦‚æœå‡ºç°åœ¨[]ä¸­è¡¨ç¤ºå–å
- $xx: ä»¥xxç»“æŸ
- \b å•è¯è¾¹ç•Œï¼Œä¹Ÿå°±æ˜¯æŒ‡å•è¯å’Œç©ºæ ¼é—´çš„ä½ç½®(å¯¹ä¸­æ–‡æ— æ•ˆ)ï¼Œå¦‚ er\bå¯ä»¥åŒ¹é…"never" ä¸­çš„ 'er'ï¼Œä½†ä¸èƒ½åŒ¹é… "verb" ä¸­çš„ 'er'
- \B éå•è¯è¾¹ç•Œï¼Œer\B èƒ½åŒ¹é… "verb" ä¸­çš„ 'er'ï¼Œä½†ä¸èƒ½åŒ¹é… "never" ä¸­çš„ 'er'
- x(?=y): åŒ¹é…'x'ä»…å½“'x'åé¢è·Ÿç€'y'.è¿™ç§å«åšå…ˆè¡Œæ–­è¨€ã€‚
- (?<=y)x: åŒ¹é…'x'ä»…å½“'x'å‰é¢æ˜¯'y'.è¿™ç§å«åšåè¡Œæ–­è¨€ã€‚
- x(?!y): ä»…å½“'x'åé¢ä¸è·Ÿç€'y'æ—¶åŒ¹é…'x'ï¼Œè¿™è¢«ç§°ä¸ºæ­£å‘å¦å®šæŸ¥æ‰¾ã€‚
- (?<!y)x: ä»…å½“'x'å‰é¢ä¸æ˜¯'y'æ—¶åŒ¹é…'x'ï¼Œè¿™è¢«ç§°ä¸ºåå‘å¦å®šæŸ¥æ‰¾ã€‚ï¼ˆå¦å®šæŸ¥æ‰¾ï¼šç­‰äºå· æ¢ å¹å·ï¼‰

æ³¨æ„ï¼šè¿™é‡Œçš„æ‹¬å·ä¸å…·å¤‡åˆ†ç»„æ€§è´¨ï¼Œä»…åšä½ç½®åŒ¹é…ï¼Œ= æˆ– !å·åé¢çš„å¯ä»¥ä½¿ç”¨åˆ†ç»„ï¼Œä½†æ˜¯ä¸åœ¨åŒ¹é…çš„å­—ç¬¦ä¸²å†…

è¾¹ç•Œç¤ºä¾‹ï¼š

```js
/lo\b/.test('hello xxx') // true
/\Blo/.test('hello xx') // true
/\blo/.test('xxx lolll') // true
/lo\B/.test('xxx lolll') // true
```

æ–­è¨€ç¤ºä¾‹ï¼š

```js
/.+(?=: \d+px)/.exec('font-size: 20px;') // åŒ¹é…çš„å­—ç¬¦ä¸²æ˜¯ font-size

// = å·åé¢çš„ä¼šåˆ†ç»„ï¼Œä½†æ˜¯ä¸åœ¨åŒ¹é…çš„å­—ç¬¦ä¸²å†…
/.+(?=(: \d+px))/.exec('font-size: 20px;') // åŒ¹é…çš„å­—ç¬¦ä¸²æ˜¯ font-size
RegExp.$1 // åˆ†ç»„æ˜¯ : 20px
```

### ä¼˜å…ˆçº§

ä»é«˜åˆ°ä½ä¾æ¬¡æ˜¯ï¼š

1. æ‹¬å· ()ã€ (?:)ã€ (?=)ã€ (?!)
2. æˆ– |
3. []

ä¸¾ä¾‹ï¼š

```js
pattern = /[(ï¼ˆ](\d+)[ï¼‰)][ã€ï¼Œï¼Œã€‚.]?\s*(?=(<span class="tkspec-underline-normal">([a-z]*)<\/span>)|(_+([a-z]*)_+))/i
```

å¯åˆ†ä¸ºä»¥ä¸‹å‡ éƒ¨åˆ†ï¼š

1. [(ï¼ˆ] é›†åˆé€‰ è‹±æ–‡( æˆ– ä¸­æ–‡ï¼ˆ
2. (\d+) åŒ¹é…å¤šä¸ªæ•°å­—
3. [ï¼‰)] é›†åˆé€‰ è‹±æ–‡) æˆ– ä¸­æ–‡ ï¼‰
4. [ã€ï¼Œï¼Œã€‚.]?\s* åŒ¹é… ã€ï¼Œï¼Œã€‚. çš„å…¶ä¸­ä¸€ä¸ªæˆ–æ²¡æœ‰ï¼Œåé¢å¯ä»¥æœ‰ç©ºæ ¼
5. (?=(<span class="tkspec-underline-normal">([a-z]*)<\/span>)|(_+([a-z]*)_+))

```text
é’ˆå¯¹ç¬¬5ç‚¹ï¼šåŒ¹é… /[\(ï¼ˆ](\d+)[\ï¼‰)][ã€ï¼Œï¼Œã€‚.]?\s*/ï¼Œ
ä»…å½“åé¢æ˜¯ /(<span class="tkspec-underline-normal">([a-z]*)<\/span>)/ 
æˆ– /(_+([a-z]*)_+)/
```

å½“å‰patternä¸€å…±å…­ä¸ªåˆ†ç»„ï¼š(?=ä¸å…·å¤‡åˆ†ç»„æ€§è´¨)

```text
1. (\d+)
2. (<span class="tkspec-underline-normal">([a-z]*)<\/span>)
3. ([a-z]*)
4. (_+([a-z]*)_+)
5. ([a-z]*)
```

```js
pattern.exec('ï¼ˆ1ï¼‰<span class="tkspec-underline-normal">A</span>')
/* 
åŒ¹é…çš„å­—ç¬¦ä¸²æ˜¯ï¼šï¼ˆ1ï¼‰
åˆ†ç»„ä¾æ¬¡æ˜¯ï¼š
1
<span class=\"tkspec-underline-normal\">A</span>
A
undefined
undefined
*/ 

pattern.exec('ï¼ˆ1ï¼‰__A__')
/* 
åŒ¹é…çš„å­—ç¬¦ä¸²æ˜¯ï¼šï¼ˆ1ï¼‰
åˆ†ç»„ä¾æ¬¡æ˜¯ï¼š
1
undefined
undefined
__A__
A
*/
```

æ‰€ä»¥æ˜¯å…ˆçœ‹æ‹¬å·ï¼Œæœ‰æ²¡æœ‰åˆ†ç»„ï¼Œä»æ‹¬å·é‡Œå†çœ‹æ˜¯ä¸æ˜¯ä½ç½®åŒ¹é…(?=)ï¼Œæˆ–è€…æ˜¯å¿½ç•¥åˆ†ç»„(?:)ï¼Œ å†çœ‹æœ‰æ²¡æœ‰ |ï¼Œ() å†…çš„ | æ˜¯å¯ä»¥å°† () çš„å†…å®¹æ‹†åˆ†çš„ï¼Œåªèƒ½åŒ¹é…å…¶ä¸­ä¸€ä¸ªï¼Œæ‰€ä»¥ä¸Šé¢çš„patternä¹Ÿå¯ä»¥è¿›è¡Œä¼˜åŒ–

```js
pattern = /[(ï¼ˆ](\d+)[ï¼‰)][ã€ï¼Œï¼Œã€‚.]?\s*(?=(<span class="tkspec-underline-normal">|_+)([a-z]*)(<\/span>|_+))/i
```

è¿™é‡Œå°†æœ‰å››ä¸ªåˆ†ç»„ï¼š

```text
1. (\d+)
2. <span class="tkspec-underline-normal"> æˆ– _+
3. ([a-z]*)
4. <\/span> æˆ– _+
```

```js
pattern.exec('ï¼ˆ1ï¼‰<span class="tkspec-underline-normal">A</span>')
/* 
åŒ¹é…çš„å­—ç¬¦ä¸²æ˜¯ï¼šï¼ˆ1ï¼‰
åˆ†ç»„ä¾æ¬¡æ˜¯ï¼š
1
<span class=\"tkspec-underline-normal\">
A
</span>
*/ 

pattern.exec('ï¼ˆ1ï¼‰__A__')
/* 
åŒ¹é…çš„å­—ç¬¦ä¸²æ˜¯ï¼šï¼ˆ1ï¼‰
åˆ†ç»„ä¾æ¬¡æ˜¯ï¼š
1
__
A
__
*/
```

å¦‚æœä¸æƒ³æå–å¤šä½™çš„åˆ†ç»„å†…å®¹ï¼Œåªæƒ³çŸ¥é“æ•°å­—åºå·å’Œæ¨ªçº¿ä¸­é—´çš„å†…å®¹,å¯å†æ¬¡ä¿®æ”¹

```js
pattern = /[(ï¼ˆ](\d+)[ï¼‰)][ã€ï¼Œï¼Œã€‚.]?\s*(?=(?:<span class="tkspec-underline-normal">|_+)([a-z]*)(?:<\/span>|_+))/i
```

è¿™é‡Œåªå‰©ä¸‹ä¸¤ä¸ªåˆ†ç»„ï¼š

1. (\d+)
2. ([a-z]*)

```js
pattern.exec('ï¼ˆ1ï¼‰<span class="tkspec-underline-normal">A</span>')
/* 
åŒ¹é…çš„å­—ç¬¦ä¸²æ˜¯ï¼šï¼ˆ1ï¼‰
åˆ†ç»„ä¾æ¬¡æ˜¯ï¼š
1
A
*/ 

pattern.exec('ï¼ˆ1ï¼‰__A__')
/* 
åŒ¹é…çš„å­—ç¬¦ä¸²æ˜¯ï¼šï¼ˆ1ï¼‰
åˆ†ç»„ä¾æ¬¡æ˜¯ï¼š
1
A
*/
```

?: è¡¨ç¤ºå¿½ç•¥åˆ†ç»„ï¼Œé‚£ä¸ºä»€ä¹ˆä¸èƒ½ä¸åŠ  ()ï¼Œä¸è®©å®ƒåˆ†ç»„å‘¢ï¼Ÿå› ä¸ºå’±ä»¬æƒ…å†µå¤šå¾—ç”¨ | å•Šï¼Œä¸ç„¶å°±å¾—å˜æˆè¿™æ ·ï¼š

```js
pattern = /[(ï¼ˆ](\d+)[ï¼‰)][ã€ï¼Œï¼Œã€‚.]?\s*(?=<span class="tkspec-underline-normal">|_+([a-z]*)<\/span>|_+)/i
// è¿™å°±ç›´æ¥ä¹±å¥—äº†ï¼Œé€»è¾‘ç›´æ¥å˜æˆï¼šåŒ¹é… [(ï¼ˆ](\d+)[ï¼‰)][ã€ï¼Œï¼Œã€‚.]?\s*ï¼Œä»…å½“åé¢æ˜¯ <span class="tkspec-underline-normal"> æˆ– _+([a-z]*)<\/span> æˆ– _+
```

æ‰€ä»¥ () ä¸ä»…å¯ä»¥å¸®æˆ‘ä»¬æå–éœ€è¦çš„æ•°æ®ï¼Œä¹Ÿå¯ä»¥èµ·åˆ°éš”ç¦»çš„ä½œç”¨ï¼Œä½ ä¸æƒ³è¦()é‡Œçš„æ•°æ®æ—¶å¿½ç•¥å°±å¥½äº†ã€‚

() å’Œ | æ‹†å®Œäº†ï¼Œæœ€åå†çœ‹ []ï¼Œå› ä¸º [] å†… | () ç­‰åœ¨æ­£åˆ™æœ‰ç‰¹æ®Šæ„ä¹‰çš„ç¬¦å·éƒ½æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œæ‰€ä»¥ [] æ”¾åˆ°æœ€åï¼Œåªè¦åœ¨ [] å†…çš„ï¼Œå°±æŠŠå®ƒçœ‹åšä¸€ä¸ªæ•´ä½“ã€‚

### è½¬ä¹‰

æ„é€ å‡½æ•°ä¸­æ‰€æœ‰ \ éƒ½éœ€è¦å†™ä¸¤ä¸ªæ‰ä»£è¡¨è½¬ä¹‰ ï¼Œåƒé¢„å®šä¹‰ç±» \dã€\sã€\w æœ¬èº«å¸¦ \ çš„éƒ½è¦æ”¹æˆ \\dã€\\sã€\\wï¼Œæ²¡æœ‰çš„å¦‚ . + * ç­‰å…ƒå­—ç¬¦è¦åŠ ä¸¤ä¸ª \\. \\+ \\*ï¼Œ å…ƒå­—ç¬¦å°±æ˜¯åœ¨æ­£åˆ™é‡Œæœ‰ç‰¹æ®Šå«ä¹‰çš„å­—ç¬¦ï¼ŒåŒ…æ‹¬ï¼š ( [ { \ ^ $ | ) ? * + . ] }

```js
const pattern1 = new RegExp('orangesolo\.cn') // ç»“æœæ˜¯ /orangesolo.cn/
pattern1.test('orangesoloxcn') // true
const pattern2 = new RegExp('orangesolo\\.cn') // ç»“æœæ˜¯ /orangesolo\.cn/
pattern2.test('orangesoloxcn') // false

const pattern3 = new RegExp('\d+')
pattern3.test('123') // false
const pattern4 = new RegExp('\\d+')
pattern4.test('123') // true
```

### è´ªå©ªæ¨¡å¼ ä¸ éè´ªå©ªæ¨¡å¼

æ­£åˆ™è¡¨è¾¾å¼åœ¨åŒ¹é…çš„æ—¶å€™é»˜è®¤ä¼šå°½å¯èƒ½å¤šçš„åŒ¹é…ï¼Œå«è´ªå©ªæ¨¡å¼ã€‚é€šè¿‡åœ¨é™å®šç¬¦ååŠ  ? å¯ä»¥è¿›è¡Œéè´ªå©ªåŒ¹é…ï¼Œé™å®šç¬¦å¦‚ * + {n}

```js
`12345678`.replace(/\d{3,6}/, '-') // -78
`12345678`.replace(/\d{3,6}?/, '-') // -45678

'abbbb'.replace(/ab+/, '-') // -
'abbbb'.replace(/ab+?/, '-') // -bbb
'abbbb'.replace(/ab*?/, '-') // -bbbb
```

### ä¿®é¥°ç¬¦

- iï¼šignoreCaseï¼Œæ‰§è¡Œå¯¹å¤§å°å†™ä¸æ•æ„Ÿçš„åŒ¹é…
- gï¼šglobalï¼Œæ‰§è¡Œå…¨å±€åŒ¹é…ï¼ŒæŸ¥æ‰¾æ‰€æœ‰åŒ¹é…è€Œéåœ¨æ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…ååœæ­¢
- mï¼šmultilineï¼Œæ‰§è¡Œå¤šè¡ŒåŒ¹é…ï¼Œä¼šæ”¹å˜ ^ å’Œ $çš„è¡Œä¸º
- u å¯ä»¥åŒ¹é…4å­—èŠ‚çš„unicodeç¼–ç 
- s (ES9) dotAllæ¨¡å¼ï¼Œ .å¯ä»¥åŒ¹é…æ¢è¡Œç¬¦

gã€m ç¤ºä¾‹ï¼š

```js
const str1 = '(1)__A__ name is Tony, (2)__B__ am 13 years old.'
const pattern1 = /[(ï¼ˆ](\d+)[ï¼‰)][ã€ï¼Œï¼Œã€‚.]?\s*(?=(?:<span class="tkspec-underline-normal">|_+)([a-z]*)(?:<\/span>|_+))/i
str1.replace(pattern1, 'test') // 'test__A__ name is Tony, (2)__B__ am 13 years old.' 
// åªåŒ¹é…ä¸€ä¸ª

const pattern2 =  /[(ï¼ˆ](\d+)[ï¼‰)][ã€ï¼Œï¼Œã€‚.]?\s*(?=(?:<span class="tkspec-underline-normal">|_+)([a-z]*)(?:<\/span>|_+))/ig
str1.replace(pattern2, 'test') // 'test__A__ name is Tony, test__B__ am 13 years old.' 
// åŠ äº† g å¯ä»¥åŒ¹é…å¤šä¸ª

const str2 = /* æœ‰æ¢è¡Œ */`(1)__A__ name is Tony.
(2)__B__ am 13 years old.
`
str2.replace(pattern2, 'test') // 'test__A__ name is Tony.\ntest__B__ am 13 years old.\n'  
// å’Œä¸Šé¢ä¸€æ ·ï¼ŒåŒ¹é…å¤šä¸ªï¼Œè¯´æ˜æ¢è¡Œä¸å½±å“ g åŒ¹é…

const pattern3 = /^[(ï¼ˆ](\d+)[ï¼‰)][ã€ï¼Œï¼Œã€‚.]?\s*(?=(?:<span class="tkspec-underline-normal">|_+)([a-z]*)(?:<\/span>|_+))/ig // åŠ äº† ^
str2.replace(pattern3, 'test') // 'test__A__ name is Tony.\n(2)__B__ am 13 years old.\n' 
// åªåŒ¹é…ä¸€ä¸ªï¼Œ^ é™åˆ¶äº† g å¤šä¸ªåŒ¹é…çš„èƒ½åŠ›

const pattern4 = /^[(ï¼ˆ](\d+)[ï¼‰)][ã€ï¼Œï¼Œã€‚.]?\s*(?=(?:<span class="tkspec-underline-normal">|_+)([a-z]*)(?:<\/span>|_+))/igm
str2.replace(pattern4, 'test') // 'test__A__ name is Tony.\ntest__B__ am 13 years old.\n' 
// å“‡å¶ï¼ŒåŒ¹é…å¤šä¸ªï¼Œm å¯ä»¥æ”¹å˜ ^ çš„è¡Œä¸º

const pattern5 = /^[(ï¼ˆ](\d+)[ï¼‰)][ã€ï¼Œï¼Œã€‚.]?\s*(?=(?:<span class="tkspec-underline-normal">|_+)([a-z]*)(?:<\/span>|_+))/im
str2.replace(pattern5, 'test') // 'test__A__ name is Tony.\n(2)__B__ am 13 years old.\n' 
// å•Šï¼åªæœ‰ä¸€ä¸ªï¼Œå› ä¸º m è™½ç„¶å¯ä»¥å¤šè¡ŒåŒ¹é…ï¼Œä½†æ˜¯ä¹Ÿå§‹ç»ˆåªèƒ½åŒ¹é…ä¸€ä¸ªï¼ŒåŒ¹é…å¤šä¸ªè¿˜å¾—çœ‹ g
```

ç»“è®ºï¼š

1. åŠ äº† g å°±å¯ä»¥åŒ¹é…å¤šä¸ªï¼Œ\n \r ä¸ä¼šå½±å“å…¶è¡Œä¸º
2. ^ æ˜¯ä»å¤´åŒ¹é…ï¼Œè¿™æ—¶å°±ä¼šå½±å“ g çš„èƒ½åŠ›ï¼Œå› ä¸ºgåªæ˜¯æŒ‰ç…§patternä»é‡Œé¢æ‰¾èƒ½åŒ¹é…ä¸Šçš„ï¼Œä¾‹å­é‡Œå‘ç°åªæœ‰ä¸€ä¸ª (1) æ»¡è¶³ï¼Œæ‰€ä»¥åŠ äº† ^ ä¸€èˆ¬ä¹Ÿä¸ä¼šä½¿ç”¨ g
3. m å°±æ˜¯ä¸ºäº†è§£å†³åŠ  ^ å¯¼è‡´ g æ— ç”¨çš„æƒ…å†µï¼Œæ­¤æ—¶å°±ç®—æ˜¯æœ‰ ^ ä¹Ÿä¸èƒ½é˜»æŒ¡æˆ‘å…¨å±€åŒ¹é…
4. å‰é¢çš„ä¾‹å­ä¹Ÿè¡¨ç¤ºä¸è¦ ^ çš„è¯ï¼Œæˆ‘ g ç…§æ ·è¡Œï¼Œ åŠ äº† ^ è¿˜å¾—åŠ ä¸ª m è§£å†³bugï¼Œæˆ‘ m å²‚ä¸æ˜¯æ˜¾å¾—å¾ˆå¤šä½™ï¼Ÿ
5. å½“ç„¶ä¸æ˜¯ï¼å°±åƒä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä¸€å®šè¦åŒ¹é…çš„æ˜¯åœ¨å‰é¢çš„ (1)ï¼Œ(1)å‰é¢æœ‰ä»»ä½•å†…å®¹éƒ½æ˜¯ä¸è¡Œçš„ï¼Œæ‰€æœ‰å¿…é¡»æœ‰ ^ ï¼Œä¹Ÿå°±å¿…é¡»æœ‰ mï¼Œä¹Ÿå°±å¿…é¡»æœ‰ g ï¼Œæ‰€ä»¥ ^ m g é€šå¸¸ä¸€èµ·å‡ºç°
6. ä»¥ä¸Šå…³äº ^ çš„ç†è®ºåŒæ ·é€‚ç”¨äº $

uã€s ç¤ºä¾‹ï¼š

```js
// åŠ äº†uä¿®é¥°ç¬¦ï¼Œä¼šæ­£ç¡®å¤„ç†å¤§äº \uFFFF çš„unicodeï¼Œæ¯”å¦‚4å­—èŠ‚çš„ğŸª \uD83D\uDC2A
/^\uD83D/.test('\uD83D\uDC2A') // true
/^\uD83D/u.test('\uD83D\uDC2A') //  false


/ABC.DEF/.test('ABC\uD83DDEF') // true
/ABC.DEF/.test('ABC\uD83D\uDC2ADEF') // false
/ABC.DEF/u.test('ABC\uD83D\uDC2ADEF') // true

/foo.bar/.test('foo\nbar'); // false
/foo.bar/s.test('foo\nbar'); // true
```

## å±æ€§å’Œæ–¹æ³•

### RegExpæ„é€ å‡½æ•°å±æ€§

åŸºäºæ‰€æ‰§è¡Œçš„æœ€è¿‘ä¸€æ¬¡æ­£åˆ™è¡¨è¾¾å¼æ“ä½œè€Œå˜åŒ–ï¼Œä¸”åˆ†åˆ«æœ‰ä¸€ä¸ªé•¿å±æ€§åå’ŒçŸ­å±æ€§åã€‚

- inputï¼š $_ï¼Œ è¿”å›æ‰§è¡Œè§„èŒƒè¡¨è¿°æŸ¥æ‰¾çš„å­—ç¬¦ä¸²ã€‚åªè¯»
- lastMatchï¼š $&ï¼Œ è¿”å›ä»»ä½•æ­£åˆ™è¡¨è¾¾å¼æœç´¢è¿‡ç¨‹ä¸­çš„æœ€ååŒ¹é…çš„å­—ç¬¦ã€‚åªè¯»
- lastParenï¼š $+ï¼Œ å¦‚æœæœ‰çš„è¯ï¼Œè¿”å›ä»»ä½•æ­£åˆ™è¡¨è¾¾å¼æŸ¥æ‰¾è¿‡ç¨‹ä¸­æœ€åæ‹¬çš„å­(åˆ†ç»„)åŒ¹é…ã€‚åªè¯»
- leftContextï¼š $\ï¼Œ è¿”å›è¢«æŸ¥æ‰¾çš„å­—ç¬¦ä¸²ä¸­ä»å­—ç¬¦ä¸²å¼€å§‹ä½ç½®åˆ°æœ€ååŒ¹é…ä¹‹å‰çš„ä½ç½®ä¹‹é—´çš„å­—ç¬¦ã€‚åªè¯»
- rightContextï¼š $'ï¼Œ è¿”å›è¢«æœç´¢çš„å­—ç¬¦ä¸²ä¸­ä»æœ€åä¸€ä¸ªåŒ¹é…ä½ç½®å¼€å§‹åˆ°å­—ç¬¦ä¸²ç»“å°¾ä¹‹é—´çš„å­—ç¬¦ã€‚åªè¯»

```js
const pattern4 = /^[(ï¼ˆ](\d+)[ï¼‰)][ã€ï¼Œï¼Œã€‚.]?\s*(?=(?:<span class="tkspec-underline-normal">|_+)([a-z]*)(?:<\/span>|_+))/igm
const str = `(1)__A__ name is Tony.
(2)__B__ am 13 years old.`

pattern4.exec(str)
/* è¿”å› 
{
  0: "(1)",
  1: "1",
  2: "A",
  groups: undefined,
  index: 0,
  input: "(1)__A__ name is Tony.\n(2)__B__ am 13 years old.",
  length: 3,
}
 */

RegExp.input // '(1)__A__ name is Tony.\n(2)__B__ am 13 years old.'
RegExp.lastMatch // '(1)'
RegExp.lastParen // 'A'
RegExp.leftContext // ''
RegExp.rightContext  // '__A__ name is Tony.\n(2)__B__ am 13 years old.'

pattern4.exec(str) // exec å¤šä¸ªå¤šæ¬¡æ‰§è¡Œï¼ŒåŒ¹é…å‡ æ¬¡å°±å¯ä»¥æ‰§è¡Œå‡ æ¬¡
/* è¿”å›
{
  0: "(2)",
  1: "2",
  2: "B",
  groups: undefined,
  index: 23,
  input: "(1)__A__ name is Tony.\n(2)__B__ am 13 years old.",
  length: 3
}
*/

RegExp.input // '(1)__A__ name is Tony.\n(2)__B__ am 13 years old.'
RegExp.lastMatch // '(2)'
RegExp.lastParen // 'B'
RegExp.leftContext // '(1)__A__ name is Tony.\n'
RegExp.rightContext  // '__B__ am 13 years old.'

pattern4.exec(str) // è¿”å› nullï¼Œè¿™é‡Œåªèƒ½åŒ¹é…ä¸¤æ¬¡ï¼Œè¶…è¿‡ä¸¤æ¬¡æ‰§è¡Œ exec ç»“æœéƒ½æ˜¯ null
```

### RegExpå®ä¾‹ä¸Šçš„å±æ€§

- globalï¼š æ˜¯å¦å…¨æ–‡æœç´¢ï¼Œé»˜è®¤ falseï¼Œå¯¹åº”ä¿®é¥°ç¬¦çš„ gï¼Œåªè¯»
- ignoreCaseï¼š æ˜¯å¦å¤§å°å†™æ•æ„Ÿï¼Œé»˜è®¤ falseï¼Œå¯¹åº”ä¿®é¥°ç¬¦ iï¼Œåªè¯»
- multilineï¼š æ˜¯å¦å¤šè¡Œæœç´¢ï¼Œé»˜è®¤ falseï¼Œå¯¹åº”ä¿®é¥°ç¬¦ mï¼Œåªè¯»
- flagsï¼š è¿”å›ä¿®é¥°ç¬¦ï¼Œåªè¯»
- lastIndexï¼š å½“å‰è¡¨è¾¾å¼åŒ¹é…å†…å®¹çš„æœ€åä¸€ä¸ªå­—ç¬¦çš„ä¸‹ä¸€ä¸ªä½ç½®
- sourceï¼š æ­£åˆ™è¡¨è¾¾å¼çš„æ–‡æœ¬å­—ç¬¦ä¸²

```js
/[a-z]/g.global // true
/[a-z]/i.ignoreCase // true
/[a-z]/gim.flags // 'gim'

const pattern4 = /^[(ï¼ˆ](\d+)[ï¼‰)][ã€ï¼Œï¼Œã€‚.]?\s*(?=(?:<span class="tkspec-underline-normal">|_+)([a-z]*)(?:<\/span>|_+))/igm
const str = `(1)__A__ name is Tony.
(2)__B__ am 13 years old.`
pattern4.exec(str)
pattern4.lastIndex // 3
pattern4.exec(str)
pattern4.lastIndex // 26

pattern4.source // '^[(ï¼ˆ](\\d+)[ï¼‰)][ã€ï¼Œï¼Œã€‚.]?\\s*(?=(?:<span class="tkspec-underline-normal">|_+)([a-z]*)(?:<\\/span>|_+))'
```

### RegExpå®ä¾‹ä¸Šçš„æ–¹æ³•

- RegExp.prototype.test(str)ï¼šæµ‹è¯•strä¸­æ˜¯å¦å­˜åœ¨åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²,ä½¿ç”¨.testçš„æ—¶å€™å¦‚æœä¿®é¥°ç¬¦æœ‰ gï¼Œé‚£ä¹ˆä¼šæ­£åˆ™ä¼šè®°ä½lastIndexå¹¶åœ¨ä¸‹ä¸€æ¬¡æ‰§è¡Œçš„æ—¶å€™ä»lastIndexå¤„å¼€å§‹æ£€æµ‹ï¼Œå¦‚æœåªæ˜¯ä¸ºäº†æµ‹è¯•æ˜¯å¦ç¬¦åˆæ­£åˆ™ï¼Œå¯ä»¥ä¸ç”¨ g æˆ–è€…æ¯æ¬¡éƒ½é‡æ–°å®ä¾‹åŒ–æ­£åˆ™è¡¨è¾¾å¼
- RegExp.prototype.exec(str)ï¼šä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å¯¹å­—ç¬¦ä¸²æ‰§è¡Œæœç´¢ï¼Œå¹¶å°†æ›´æ–°å…¨å±€RegExpå¯¹è±¡çš„å±æ€§ä»¥åæ˜ åŒ¹é…ç»“æœï¼Œå¦‚æœåŒ¹é…å¤±è´¥ï¼Œexec() æ–¹æ³•è¿”å› nullï¼Œexec()æ°¸è¿œåªè¿”å›ä¸€ä¸ªåŒ¹é…é¡¹ï¼Œå¦‚æœè®¾ç½®äº†gä¿®é¥°ç¬¦ï¼Œæ¯æ¬¡è°ƒç”¨exec()ä¼šåœ¨å­—ç¬¦ä¸²ä¸­**ç»§ç»­**æŸ¥æ‰¾æ–°åŒ¹é…é¡¹ï¼Œè¿”å›çš„ç»†èŠ‚å¯åœ¨ RegExpæ„é€ å‡½æ•°å±æ€§ç« èŠ‚ç¤ºä¾‹çœ‹ã€‚

æ‰€ä»¥ test å’Œ exec åœ¨æœ‰ g æ—¶éƒ½å¯ä»¥æ‰§è¡Œå¤šæ¬¡ï¼Œæ¯æ¬¡éƒ½åœ¨ä¸Šä¸€æ¬¡å‰©ä½™çš„å­—ç¬¦ä¸²ä¸­åŒ¹é…ã€‚

```js
const pattern4 = /^[(ï¼ˆ](\d+)[ï¼‰)][ã€ï¼Œï¼Œã€‚.]?\s*(?=(?:<span class="tkspec-underline-normal">|_+)([a-z]*)(?:<\/span>|_+))/igm
const str = `(1)__A__ name is Tony.
(2)__B__ am 13 years old.`

pattern4.test(str) // ç¬¬ä¸€æ¬¡ true
pattern4.test(str) // ç¬¬äºŒæ¬¡ true
pattern4.test(str) // ç¬¬ä¸‰æ¬¡ false
```

### String ä¸­æ”¯æŒæ­£åˆ™çš„æ–¹æ³•

- String.prototype.search(reg)ï¼šè¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…ç»“æœçš„indexï¼ŒæŸ¥æ‰¾ä¸åˆ°è¿”å›-1ï¼Œå› æ­¤ä¸æ‰§è¡Œå…¨å±€åŒ¹é…ï¼Œä¼šå¿½ç•¥ä¿®é¥°ç¬¦g
- String.prototype.split(reg)ï¼šåˆ†å‰²å­—ç¬¦ä¸²æˆæ•°ç»„
- String.prototype.match(reg)ï¼šåœ¨å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾ä¸€ä¸ªæˆ–å¤šä¸ªä¸regç›¸åŒ¹é…çš„æ–‡æœ¬ï¼Œè¿”å›å€¼ä¸ exec çš„è¿”å›ç±»ä¼¼ï¼Œä¸è¿‡åªè¿”å›åŒ¹é…çš„å­—ç¬¦ä¸²æ•°ç»„
- String.prototype.matchAll(reg)ï¼šè¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„ç»“æœåŠåˆ†ç»„æ•è·ç»„çš„è¿­ä»£å™¨ï¼Œæ­£åˆ™å¿…é¡»åŠ  g
- String.prototype.replace(reg, str | num | function)ï¼šæ‰¾åˆ°åŒ¹é…å¹¶æ›¿æ¢
- String.prototype.replaceAll(reg, str | num | function): æ‰¾åˆ°æ‰€æœ‰åŒ¹é…çš„å¹¶æ›¿æ¢ï¼Œæ­£åˆ™å¿…é¡»åŠ  g

```js
const pattern4 = /^[(ï¼ˆ](\d+)[ï¼‰)][ã€ï¼Œï¼Œã€‚.]?\s*(?=(?:<span class="tkspec-underline-normal">|_+)([a-z]*)(?:<\/span>|_+))/igm
const str = `(1)__A__ name is Tony.
(2)__B__ am 13 years old.`

str.search(pattern4) // 0
str.split(pattern4) // (7)Â ['', '1', 'A', '__A__ name is Tony.\n', '2', 'B', '__B__ am 13 years old.']
// åˆ†ç»„ä¼šå½±å“ split çš„è¡Œä¸º

// å»æ‰æ‰€æœ‰åˆ†ç»„
const pattern = /^[(ï¼ˆ]\d+[ï¼‰)][ã€ï¼Œï¼Œã€‚.]?\s*(?=(?:<span class="tkspec-underline-normal">|_+)[a-z]*(?:<\/span>|_+))/igm
str.split(pattern) // ['', '__A__ name is Tony.\n', '__B__ am 13 years old.']

str.replace(pattern4, 'test') // 'test__A__ name is Tony.\ntest__B__ am 13 years old.'

str.replace(pattern4, (w,e,r,t,l) => {
  console.log({w,e,r,t,l})
})
/* è¾“å‡º
replace ç¬¬äºŒä¸ªå‚æ•°æ˜¯å‡½æ•°æ—¶ï¼Œå‚æ•°åˆ†åˆ«æ˜¯ (åŒ¹é…ä¸Šçš„å†…å®¹ï¼Œåˆ†ç»„1ï¼Œåˆ†ç»„2ï¼Œåˆ†ç»„...ï¼ŒåŒ¹é…æ–‡æœ¬çš„ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ä½ç½®ï¼ŒåŸå­—ç¬¦ä¸²)
{
  w: "(1)",
  e: "1",
  r: "A",
  t: 0,
  l: "(1)__A__ name is Tony.\n(2)__B__ am 13 years old.",
}
{
  w: "(2)"
  e: "2"
  r: "B"
  t: 23
  l: "(1)__A__ name is Tony.\n(2)__B__ am 13 years old."
}
*/

'aabbcc'.replace('b', '.'); // 'aa.bcc'
'aabbcc'.replaceAll('b', '.'); // 'aa..cc'

str.match(pattern4)Â // ['(1)', '(2)']

const iterator = str.matchAll(pattern4)
iterator.next() 
/* { 
  done: false
  value: (3) ['(1)', '1', 'A', index: 0, input: '(1)__A__ name is Tony.\n(2)__B__ am 13 years old.', groups: undefined]
} */
iterator.next() 
/* {
  done: false
  value: (3) ['(2)', '2', 'B', index: 23, input: '(1)__A__ name is Tony.\n(2)__B__ am 13 years old.', groups: undefined]
} */
iterator.next() 
/* {
  done: true
  value: undefined
} */

// æ—¢ç„¶æ˜¯è¿­ä»£å™¨ï¼Œä¾¿å¯ä»¥ä½¿ç”¨ for ofï¼ŒArray.from()ï¼Œ æ‰©å±•è¿ç®—ç¬¦ç­‰
[...str.matchAll(pattern4)] // å‰é¢ä¸¤æ¬¡ç»“æœä¸­valueçš„é›†åˆ
```

## æ­£åˆ™åˆ†æå·¥å…·

æœ‰ä¸¤ä¸ªæ­£åˆ™åˆ†æå·¥å…·ï¼Œå¯ä»¥ç»˜åˆ¶è¯¦ç»†çš„é€»è¾‘å›¾ï¼š[Regexper](https://regexper.com)ã€[Regulex](https://jex.im/regulex/)

<img src="https://orangesolo.cn/assets/image/da84f66e72bdf89e7af7ce280002fc89.png" alt="" class="md-img" loading="lazy" width="796" height="270"/>

<img src="https://orangesolo.cn/assets/image/8657fed002bf746716227fc8439e4dcf.png" alt="" class="md-img" loading="lazy" width="796" height="226"/>

æ¯”è¾ƒèµ·æ¥ï¼Œè¿˜æ˜¯ä¸‹é¢çš„é è°±ï¼š

<img src="https://orangesolo.cn/assets/image/fd00a9e55a83ad12e7c6d2c15c0292e6.png" alt="" class="md-img" loading="lazy" width="796" height="112"/>

<img src="https://orangesolo.cn/assets/image/7a7d7d6f803dbeaa3980a746a27dc345.png" alt="" class="md-img" loading="lazy" width="796" height="169"/>

## ç»ƒä¹ 

### 1 åŒ¹é…æ•°å­— 1-64

```js
// ä¸‰ç§æƒ…å†µï¼Œä½¿ç”¨ () å’Œ | åˆ†å¼€ï¼Œ1-9 ä¸€ç»„ï¼Œ10-59 ä¸€ç»„ï¼Œ60-64 ä¸€ç»„
/^([1-9]|[1-5][0-9]|6[0-4])$/
```

### 2 å»é™¤å‰åç©ºç™½ç¬¦

```js
// ç©ºæ ¼åœ¨å‰ | ç©ºæ ¼åœ¨å
'  hello '.replace(/^\s+|\s+$/g, '') // 'hello'
```

### 3 é©¼å³°ä¸­åˆ’çº¿äº’è½¬

```js
'get-element-by-id'.replace(/^[a-z]|-[a-z]/g, (w) => {
    return w.slice(-1).toUpperCase()
}) // GetElementById

// ^ $ ä¹Ÿå¯ä»¥åœ¨åˆ†ç»„å†…
'get-element-by-id'.replace(/(?:^|-)[a-z]/g, (w) => {
    return w.slice(-1).toUpperCase()
}) // GetElementById

'GetElementById'.replace(/(^[A-Z])|([A-Z])/g, (w,e, r) => {
    // ä¸¤ä¸ªåˆ†ç»„ï¼š(^[A-Z])ä¸ºeï¼Œ([A-Z])ä¸ºr
    // e æœ‰å€¼è¡¨ç¤ºæ˜¯é¦–å­—æ¯ï¼Œrå‘½ä¸­è¯´æ˜åœ¨ä¸­é—´
    return e ? e.toLowerCase() : '-' + r.toLowerCase()
}) // get-element-by-id

// ç®€åŒ–ç‰ˆ
'GetElementById'.replace(/[A-Z]/g, (w) => {
    return '-' + w.toLowerCase()
}).slice(1) // get-element-by-id
```

### 4 è§£æ url çš„ query

```js
const url = "https://xxx.cn/webhook?name=blog&a=1"
const obj = {}
url.split('?')[1].replace(/([^&=]+)=([^&=]+)/g, (w,key,val) => {
  obj[key] = val
})
obj // {name: 'blog', a: '1'}
```

### 5 å¯†ç æ ¡éªŒ

å‡è®¾å¯†ç çš„è§„åˆ™æ˜¯ï¼šåªèƒ½ç”±å­—æ¯ï¼Œæ•°å­— ä¸‹åˆ’çº¿ç»„æˆï¼Œä¸”å¿…é¡»åŒ…å«å¤§å°å†™å­—æ¯ï¼Œé•¿åº¦å¿…é¡»å…«ä½ä»¥ä¸Š

```js
const patterns = new Map([
  [/^\w+$/, 'åªèƒ½ç”±å­—æ¯ï¼Œæ•°å­— ä¸‹åˆ’çº¿ç»„æˆï¼Œä¸èƒ½æœ‰å…¶ä»–å­—ç¬¦'],
  [/[a-z]+/,'æ²¡æœ‰åŒ…å«å°å†™å­—æ¯'],
  [/[A-Z]+/,'æ²¡æœ‰åŒ…å«å¤§å†™å­—æ¯'],
  [/^\w{8,}$/,'é•¿åº¦ä¸åœ¨å…«ä½ä»¥ä¸Š']
])

// éœ€è¦è®¡ç®—å¯†ç å¼ºåº¦ä¹Ÿæ˜¯ç»™ä¸Šé¢å†åŠ ä¸€ä¸ªlevel
```

### 6 è´§å¸åƒä½åˆ†éš”ç¬¦

```js
const str = '1234567890.0123'
// é¦–å…ˆç¡®å®šä½¿ç”¨ replace è¿›è¡Œ g åŒ¹é…ï¼Œæ‰¾åˆ°  1 4 7ï¼Œç»™ä»–ä»¬åé¢åŠ ä¸Š ,
// .0123ï¼Œä¸€èˆ¬å°æ•°ç‚¹åé¢ä¸ç”¨åˆ†å‰²çš„
const arr = str.split('.')
arr[0].replace(/(\d)/g, '$1,') // åŸºç¡€ç»“æ„
// \dçš„åé¢å¿…é¡»æ˜¯ä¸‰ä¸ªä¸€ç»„ï¼Œè¿˜å¾—ä½ç½®åŒ¹é… ä½¿ç”¨ x(?=y)
arr[0].replace(/(\d)(?=(\d{3})+)/g, '$1,') // '1,2,3,4,5,6,7,890'
// è¿™æ ·ä¾æ—§ä¸è¡Œï¼Œå› ä¸º 1 2 3 4 5 6 7 éƒ½å¯ä»¥åŒ¹é…ä¸Š (?=\d{3})ï¼Œå¿…é¡»è¿›è¡Œé™åˆ¶
arr[0].replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1,') + '.'+ arr[1] //'1,234,567,890.0123'
// (\d{3})+ çš„åé¢ä¸èƒ½æ˜¯ \dï¼ŒåŒ¹é…ä¸Šçš„æ•°å­—åé¢ä¸€å®šæ˜¯ä¸‰çš„å€æ•°ï¼Œä¸ä¼šæœ‰å¤šä½™çš„æ•°å­—
```

### 7 decodeå‡½æ•°

```js
decode("2[a]") //aa
decode("2[a]c") // aac
decode("2[ab]2[d]") // ababdd
decode("2[c2[b]]") // cbbcbb

function decode(str) {
  const pattern = /(\d+)\[([a-z]+)\]/ig
  str = str.replace(pattern, (w,k,v) => v.repeat(k))
  if(pattern.test(str)){
    str = decode(str)
  }
  return str
}
```

### 8 æŠŠæ•°å€¼è½¬åŒ–ä¸ºå¯¹åº”çš„ä¸­æ–‡è¡¨è¾¾æ–¹å¼

```js
formate(123004.123) //åäºŒä¸‡ä¸‰åƒé›¶å››ç‚¹ä¸€äºŒä¸‰
formate(123456789) // ä¸€äº¿äºŒåƒä¸‰ç™¾å››åäº”ä¸‡å…­åƒä¸ƒç™¾å…«åä¹
formate(100000000000000000000000) //ä¸€åƒä¸‡äº¿äº¿
formate(1100000003.001) // åä¸€äº¿é›¶ä¸‰ç‚¹é›¶é›¶ä¸€
/* 
 æŸ¥æ‰¾è§„å¾‹ï¼šåƒ 123456789012345678901 å¯ä»¥åˆ†å‰²æˆ 1 2345 6789 0123 4567 8901
  ä»åå¾€å‰ç©ºæ ¼ä¸Šå¯¹åº”çš„åˆ†åˆ«æ˜¯äº¤å‰çš„ ä¸‡ æˆ– äº¿ï¼Œ4ä¸ªä¸ºä¸‡ï¼Œ8ä¸ªä¸ºäº¿
  1 ä¸‡ 2345 äº¿ 6789 ä¸‡ 0123 äº¿ 4567 ä¸‡ 8901
  å› æ­¤å¯ä»¥å€Ÿå€Ÿé‰´ åƒä½åˆ†éš”ç¬¦ çš„åšæ³•ï¼Œå…ˆå°† äº¿ä¸‡å¡«å……èµ·æ¥å½¢æˆä¸Šé¢çš„å­—ç¬¦ä¸²
  ç„¶ååˆ†åˆ«å¯¹é‡Œé¢çš„è¿ç»­å››ä¸ªæ•°å­—è¿›è¡Œåç™¾åƒåŒ–

  å› ä¸ºè¿™ç§æ˜¯å¯¹æ–‡æœ¬çš„æ— è„‘å¤„ç†ï¼Œæ¯”å¦‚ 1003 å°±æ˜¯ ä¸€åƒé›¶é›¶ä¸‰... æ•°å€¼çš„ä¸­æ–‡è¡¨è¾¾æ–¹å¼æœ‰ä¸€äº›ç®€åŒ–ï¼Œä¹Ÿéœ€è¦ç‰¹æ®Šå¤„ç†
*/
function formate(num) {
  // æ•°å€¼è¿‡å¤§å˜ä¸ºç§‘å­¦è®¡æ•°æ³•ï¼ŒtoString ä¹Ÿä¸èƒ½æ˜¾ç¤ºå®Œæ•´ï¼Œè¿™é‡Œä½¿ç”¨ toLocaleString å–å·§çš„æ–¹å¼æ‹¿åˆ°å®Œæ•´çš„å­—ç¬¦ä¸² :D
  // å¦‚æœç¡®å®šè¾“å…¥æ˜¯æ•´æ•°ä¸”å¤§äº 2^53-1ï¼Œå¯ä»¥ä½¿ç”¨BigInt
  const str = num.toLocaleString().replaceAll(',', '')
  const temp1 = 'é›¶ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹å'
  const temp2 = ' åç™¾åƒ'
  const arr = str.split('.') // æ•´æ•°ä½å’Œå°æ•°ä½åˆ†å¼€å¤„ç†
  const res1 = arr[0].replace(/(\d)(?=(\d{8})+(?!\d))/g, '$1äº¿') // å…ˆ8ä½åŠ äº¿
    .replace(/(\d)(?=(\d{4})+(?!\d))/g, '$1ä¸‡') // å†å››ä½åŠ ä¸‡
    .replace(/\d+/g, (w) => { // å°†æ•°å­—è½¬ä¸ºä¸ªåç™¾åƒçš„ç»“æ„
      return w.split('').reverse().reduce((res, n, index) => {
        return temp1[n] + (n !== '0' ? temp2[index] : '') + res
      }, '')
    })
    .replace(/é›¶+/g, 'é›¶') // ä»¥ä¸‹ä¸ºç‰¹æ®Šå¤„ç†
    .replace(/^é›¶|é›¶$/, '')
    .replace(/é›¶(ä¸‡|äº¿)/g, '$1')
    .replace(/äº¿ä¸‡/g, 'äº¿')
    .replace(/ä¸€å/g, 'å')
    .replace(/\s/g, '')
  const res2 = arr[1]?.split('').map(i => temp1[i]).join('') || '' // å°æ•°ç‚¹åçš„ç›´æ¥â€™å¹³é“ºâ€˜
  return res1 + (res2 ? `ç‚¹${res2}` : '')
}
formate(123456789012345678901n) // bigint
// ä¸€ä¸‡ äºŒåƒä¸‰ç™¾å››åäº”äº¿ å…­åƒä¸ƒç™¾å…«åä¹ä¸‡ é›¶ä¸€ç™¾äºŒåä¸‰äº¿ å››åƒäº”ç™¾å…­åä¸ƒä¸‡ å…«åƒä¹ç™¾é›¶ä¸€
```

### 9. å¿«é€’åœ°å€æ”¶ä»¶äººè¯†åˆ«

å°† 'å±±è¥¿çœå¤ªåŸå¸‚å°åº—åŒºxxè¡—é“xxå°åŒºxå·æ¥¼xå•å…ƒ å¼ é“å†› 12213331444' è§£ææˆå¦‚ä¸‹ç»“æ„ï¼Œå¹¶å…¼å®¹é¡ºåºé”™ä¹±æˆ–ä¸å®Œæ•´çš„æƒ…å†µï¼ˆå›½å†…å¿«é€’ï¼‰

```js
{
  username: 'å¼ é“å†›',
  phoneNumber: '12213331444',
  provinces: [ 'å±±è¥¿çœ', 'å¤ªåŸå¸‚', 'å°åº—åŒº' ],
  detaileAddress: 'xxè¡—é“xxå°åŒºxå·æ¥¼xå•å…ƒ'
}
```

æ­¥éª¤ï¼š

1. æ‰‹æœºå·éƒ½æ˜¯æ•°å­—æˆ–è€…è€ŒåŒ…å« - ï¼Œå…ˆè§£æ
2. æŒ‰å§“æ°æ‰¾ä¸­æ–‡åå­—
3. æŒ‰çœå¸‚åŒºæ‰¾ç±è´¯
4. ç±è´¯åé¢è¿ç»­çš„æ–‡å­—å°±æ˜¯è¯¦ç»†åœ°å€
5. å¦‚æœå§“åæˆ–è¯¦ç»†åœ°å€æ²¡æœ‰æ‰¾åˆ°ï¼Œå°±ä»å‰©ä¸‹çš„æ–‡å­—é‡ŒæŒ‰é¡ºåºæ”¾ç½®ï¼Œæˆ–è€…ç›´æ¥ä¸ºç©ºè®©ç”¨æˆ·è‡ªå·±å¡«

```js
const address = [ /* åˆ—å‡ºæ‰€æœ‰çœå¸‚åŒºä¸å…¶å…³ç³»ï¼Œä¸æ‰‹åŠ¨é€‰æ‹©æ—¶éœ€è¦çš„ç»“æ„ä¸€æ · */
  {
    name: 'å±±è¥¿çœ',
    citys: [
      {
        name: 'å¤ªåŸå¸‚',
        county: [{ name: 'å°åº—åŒº' }, { name: 'è¿æ³½åŒº'}, /* ... */]
      },
      {
        name: 'é˜³æ³‰å¸‚',
        county: [{ name: 'åŸåŒº' }, { name: 'çŸ¿åŒº' }, /* ... */]
      },
      /*  ... */
    ]
  }
]
// å°½å¯èƒ½åˆ—å‡ºæ‰€æœ‰å§“æ°ï¼Œå¯ç²¾å‡†åŒ¹é…
const familyName = ['èµµ', 'é’±', 'å­™', 'æ', 'å‘¨', 'å´', 'éƒ‘', 'ç‹', 'å¼ ',/* ... */]

function parse(str) {
  const struct = { // æœ€é‡è¦è¾“å‡ºçš„ç»“æ„
    username: '',
    phoneNumber: '',
    provinces: '',
    detaileAddress: '',
  }
  const separator = 'ï¼Œ,.ã€‚ ' // è§„å®šä»¥è¿™äº›ä½œä¸ºåˆ†éš”ç¬¦
  // 1. phoneNumber
  const phPattern = /[\d-]{8,}/
  if (phPattern.test(str)) {
    const temp = phPattern.exec(str)
    struct.phoneNumber = temp[0]
    str = excludeStr(str, temp[0]) // åˆ é™¤åŒ¹é…ä¸Šçš„
  }

  // 2. username
  const namePattern = new RegExp('(?:^|[' + separator + ']+)(' + familyName.join('|') + ')([^' + separator + ']+)[' + separator + ']+') 
  // /(?:^|[ï¼Œ,.ã€‚ ]+)(èµµ|é’±|å­™|æ|å‘¨|å´|éƒ‘|ç‹|å¼ )([^ï¼Œ,.ã€‚ ]+)[ï¼Œ,.ã€‚ ]+/

  if (namePattern.test(str)) {
    const temp = namePattern.exec(str)
    struct.username = temp[1] + temp[2]
    str = excludeStr(str, temp[0]) // åˆ é™¤åŒ¹é…ä¸Šçš„
  }
  // 3. provinces åŠ detaileAddress
  const addressFlattern = flattern(address)
  const addressPattern = new RegExp(addressFlattern.join('|'),'g')
  if (addressPattern.test(str)) {
    const tempArr = str.match(addressPattern)
    struct.provinces = someDeal(tempArr)
    const tempPattern = new RegExp(tempArr[tempArr.length - 1] + '([^' + separator + ']+)[' + separator + ']+')
    // /å¤ªåŸå¸‚([^ï¼Œ,.ã€‚ ]+)[ï¼Œ,.ã€‚ ]+/
    const temp = tempPattern.exec(str)
    if (temp) {
      struct.detaileAddress = temp[1]
      str = excludeStr(str, temp[1])
    }
    str = excludeStr(str, tempArr)
  }

  // 4.  å¦‚æœ username æˆ– detaileAddress æ²¡æœ‰è§£æå‡ºæ¥ 
  if (str && (!struct.username || !struct.detaileAddress)) {
    const pattern = new RegExp('[' + separator + ']+', 'g')
    const arr = str.split(pattern).filter(v=>v)
    if(!struct.detaileAddress) struct.detaileAddress = arr.shift()
    if(!struct.username) struct.username = arr.shift()
  }
  return struct
}

function excludeStr(str, ex) {
  if (ex instanceof Array) {
    ex.forEach(item => {
      str = str.split(item).join(' ')
    })
  } else {
    str = str.split(ex).join(' ')
  }
  return str
}

function flattern(obj) {
  const string = JSON.stringify(obj)
  const pattern = /(?<="name":")([^"]+)(?=")/g
  return string.match(pattern)
}

// æœ‰æ—¶çœå¸‚åŒºä¸ä¸€å®šèƒ½åˆšå¥½å¯¹åº”ä¸Šï¼Œæ¯”å¦‚å±±è¥¿çœåŒ—äº¬å¸‚... éœ€è¦è¿›è¡Œä¿®æ­£(å¿½ç•¥)
function someDeal(arr) { 
  return arr
}

parse('å¼ é“å†›12213331444å±±è¥¿çœå¤ªåŸå¸‚å°åº—åŒºxxè¡—é“xxå°åŒºxå·æ¥¼xå•å…ƒ') // ç‰¹å¾æ˜æ˜¾çš„éƒ½ä¸ç”¨åˆ†å‰²äº†
parse('å¼ é“å†›12213331444 å±±è¥¿çœå¤ªåŸå¸‚ å°åº—åŒº xxè¡—é“xxå°åŒºxå·æ¥¼xå•å…ƒ') // è¿™ç§åˆ†å‰²ä¹Ÿæ²¡å…³ç³»
parse('å±±è¥¿çœå¤ªåŸå¸‚  å°åº—åŒº xxè¡—é“xxå°åŒºxå·æ¥¼xå•å…ƒ') // ç¼ºæ–¤å°‘ä¸¤ä¹Ÿæ²¡äº‹
parse('å±±è¥¿çœ å¤ªåŸå¸‚ å°åº—åŒº qqqqq xxæ¥¼ alias')
/* æœ€åå‰©ä¸‹ xxæ¥¼ qqqqq è¿™ç§æ²¡æœ‰å¤„ç†çš„æ˜¯éšæœºæ”¾çš„ï¼Œæˆ–è€…å¯ä»¥å†è¿›è¡ŒåŒ¹é…ï¼Œåƒæœ‰å°åŒº\æ¥¼\å•å…ƒç­‰å­—çœ¼ï¼Œå°±è®¤ä¸ºæ˜¯è¯¦ç»†åœ°å€
{
  username: 'xxæ¥¼',
  phoneNumber: '',
  provinces: [ 'å±±è¥¿çœ', 'å¤ªåŸå¸‚', 'å°åº—åŒº' ],
  detaileAddress: 'qqqqq'
}
*/
```

### 10. æ™ºèƒ½æ‹†é¢˜

```js
const str = `
1. å§“åï¼š______
2. æ‚¨çš„æ€§åˆ«ï¼š
A. ç”·
B. å¥³
3. è¯·è¾“å…¥æ‚¨çš„æ‰‹æœºå·ç ï¼š______
4. å¯¹å•†åœºçš„æœåŠ¡å“è´¨æ˜¯å¦æ»¡æ„
A. ä¸€èˆ¬
B. æ»¡æ„
C.ä¸æ»¡æ„
5. æ‚¨çš„åé¦ˆå¯¹æˆ‘ä»¬å¾ˆé‡è¦ï¼Œè¯·ç•™ä¸‹æ‚¨çš„å®è´µæ„è§ï¼
`
// æƒ³è¦è¾“å‡ºçš„ç»“æ„å¦‚ä¸‹ï¼š(åŒ…æ‹¬é¢˜å¹²ã€é¢˜ç›®ç±»å‹ã€é€‰é¡¹å†…å®¹)
[
  { title: '1. å§“åï¼š______', type: 0 },
  { title: '2. æ‚¨çš„æ€§åˆ«ï¼š', type: 1, options: { A: 'ç”·', B: 'å¥³' } },
  { title: '3. è¯·è¾“å…¥æ‚¨çš„æ‰‹æœºå·ç ï¼š______', type: 0 },
  { title: '4. å¯¹å•†åœºçš„æœåŠ¡å“è´¨æ˜¯å¦æ»¡æ„', type: 1, options: { A: 'ä¸€èˆ¬', B: 'æ»¡æ„', C: 'ä¸æ»¡æ„' } },
  { title: '5. æ‚¨çš„åé¦ˆå¯¹æˆ‘ä»¬å¾ˆé‡è¦ï¼Œè¯·ç•™ä¸‹æ‚¨çš„å®è´µæ„è§ï¼', type: 2 }
]

// é¦–å…ˆéœ€æœ‰ä¸€äº›çº¦å®š
const orderFirstPattern = /^[(ï¼ˆ\[ã€]?\d+[)ï¼‰\]ã€‘]?[,ï¼Œã€‚. ]+/ // é¢˜å¹²é™å®šï¼Œèµ·å§‹ä½ç½®ï¼Œå¯ç”±æ‹¬å·åŒ…è£¹ï¼Œåé¢éœ€æœ‰[,ï¼Œã€‚. ]ï¼Œ
const optionPattern = /^([A-Z])[,ï¼Œã€‚. ]+(.+)/ // é€‰é¡¹é™å®šï¼Œèµ·å§‹ä½ç½®ï¼ŒA-Z åå¿…é¡»æœ‰ [,ï¼Œã€‚. ]
const blankPattern = /_{3,}/ // å¡«ç©ºé™å®šï¼Œå¿…é¡»åŒ…å«3ä¸ªä»¥ä¸Šçš„_

// é¢˜å¹²ä¸é€‰é¡¹åˆ’åˆ†
const breakTipType = {
  'title': 0,
  'option': 1
}

function parse(str) {
  const arr = str.split('\n').filter(v => v)
  const struct = []
  let breakTip = 0
  let questionIndex = -1
  let optionIndex = ''
  arr.forEach(item => {
    item = item.trim()
    // é¢˜å¹²åŒ¹é…
    if (orderFirstPattern.test(item.trim())) {
      breakTip = breakTipType.title
      questionIndex += 1
      struct[questionIndex] = { title: '', type: 2 } /* é»˜è®¤é—®ç­”  */
      if (blankPattern.test(item)) {
        struct[questionIndex].type = 0 /* å¡«ç©ºé¢˜ */
      }
    }
    // é€‰é¡¹åŒ¹é…
    if (optionPattern.test(item.trim())) {
      breakTip = breakTipType.option
      optionIndex = RegExp.$1
      item = RegExp.$2
      struct[questionIndex].type = 1 /* é€‰æ‹©é¢˜ */
      if (!struct[questionIndex].options) {
        struct[questionIndex].options = {}
      }
      if (!struct[questionIndex].options[optionIndex]) {
        struct[questionIndex].options[optionIndex] = ''
      }
      console.log(optionIndex);
    }
    // æ–‡æœ¬æ”¶é›†
    if (breakTip === breakTipType.title) {
      struct[questionIndex].title += item
    } else {
      struct[questionIndex].options[optionIndex] += item
    }
  })
  return struct;
}
```

è¿™ç§æ‹†åˆ†å¯é€‚ç”¨äºé—®å·è°ƒæŸ¥çš„è¡¨å•ï¼Œæ¯”å¦‚æŠŠåŸæœ¬åœ¨wordé‡Œçš„ä¸€äº›é¢˜ç›®å¤åˆ¶åˆ°çº¿ä¸Šçš„è¡¨å•è®¾è®¡å™¨é‡Œï¼Œè¡¨å•è®¾è®¡å™¨ä¼šæœ‰å¤šç§ç±»å‹ï¼Œå¡«ç©ºï¼Œå•é€‰ï¼Œå¤šé€‰ï¼Œé—®ç­”ç­‰ï¼Œå¯ä»¥æ ¹æ®çº¦å®šçš„æ ¼å¼ä¿®æ”¹wordï¼ˆæˆæœ¬è¦æ¯”è‡ªå·±å¤åˆ¶ç²˜è´´å°å¾—å¤šï¼‰ï¼Œç„¶åæ™ºèƒ½çš„æ‹†åˆ†åˆ°è¡¨å•è®¾è®¡å™¨é‡Œï¼Œé™¤äº†è¡¨å•ï¼Œä»»ä½•å…·æœ‰è§„å¾‹çš„ä¸€å¤§æ®µæ–‡æœ¬éƒ½å¯ä»¥ä½¿ç”¨æ­£åˆ™è§£æå‡ºæŸç§æ•°æ®ç»“æ„ã€‚

## æ€»ç»“

å­¦ä¹ æ­£åˆ™çš„ç¬¬ä¸€åŸåˆ™æ˜¯ï¼šèƒ½ç”¨æ­£åˆ™å®ç°çš„å¿…å°†ç”¨æ­£åˆ™å®ç°ï¼Œæ­£åˆ™é€‚ç”¨åœºæ™¯ä¹Ÿéå¸¸å¤šï¼Œå¸¸è§çš„é‚®ç®±ã€æ‰‹æœºå·ã€èº«ä»½è¯å·ã€ç½‘å€ç­‰åˆ¤æ–­æ˜¯å¦ç¬¦åˆæŒ‡å®šæ ¼å¼çš„éªŒè¯ã€å°†å·²çŸ¥å­—ç¬¦ä¸²æ”¹æˆéœ€è¦çš„æ ¼å¼ï¼ˆreplaceï¼‰ã€ä»å­—ç¬¦ä¸²ä¸­æå–éœ€è¦çš„æ•°æ®ï¼Œå¦‚ä»ä¸€å¤§æ®µæ–‡æœ¬ä¸­è§£ææŒ‡å®šçš„æ•°æ®ç»“æ„ç­‰ï¼Œä½¿ç”¨æ­£åˆ™è¦æ¯”ä¸€èˆ¬çš„æ–¹æ³•å†™çš„ä»£ç ç®€ç»ƒå¾ˆå¤šï¼Œå°±æ˜¯éœ€è¦ä¸€äº›å­¦ä¹ æˆæœ¬ã€‚ã€‚

## Appendix

[MDN æ­£åˆ™è¡¨è¾¾å¼](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_Expressions)

[å‰ç«¯è¿›é˜¶å¿…é¡»çŸ¥é“çš„æ­£åˆ™è¡¨è¾¾å¼çŸ¥è¯†](https://mp.weixin.qq.com/s/_C3hqSq_tZUhl4IULPYv3A)
